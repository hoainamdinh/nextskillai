<!-- chatbot/templates/chatbot/chat.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Chatbot AI</title>
</head>
<body>
    <h2 style="text-align: center;">a du em Kem</h2>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <div class="container mt-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">NextSkill AI</h4>
            </div>
            <div class="card-body">
                <div id="chat-box" class="border p-3 mb-3" style="height: 600px; overflow-y: auto; background-color: #f8f9fa; display: flex; flex-direction: column;"></div>
                <div class="input-group">
                    <input type="text" id="input-msg" class="form-control" placeholder="Nhập tin..." />
                    <button class="btn btn-primary" onclick="sendMessage()">Gửi</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const socket = new WebSocket("ws://" + window.location.host + "/ws/chat/");

        socket.onmessage = function(e) {
            const data = JSON.parse(e.data);
            document.getElementById('chat-box').innerHTML += `<div class="d-flex justify-content-start"><p><b>Bot:</b> ${data.response}</p></div>`;
        };

        function sendMessage() {
            const msg = document.getElementById('input-msg').value;
            socket.send(JSON.stringify({ 'message': msg }));
            document.getElementById('chat-box').innerHTML += `<div class="d-flex justify-content-end"><p><b>Bạn:</b> ${msg}</p></div>`;
            document.getElementById('input-msg').value = '';
        }
    </script>
</body>
</html>
